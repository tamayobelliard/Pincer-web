<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pincer â€” Sistema de pedidos QR para restaurantes</title>
  <meta name="description" content="Pincer es el sistema de pedidos por QR para food trucks, food parks y restaurantes en RepÃºblica Dominicana. Tus clientes escanean, eligen y pagan desde su celular.">

  <!-- Open Graph / WhatsApp -->
  <meta property="og:title" content="Pincer â€” El servicio premium que tu negocio merece">
  <meta property="og:description" content="Sistema de pedidos por QR para food trucks y restaurantes. Tus clientes escanean, eligen y pagan desde su celular.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://i.imgur.com/FaOdU4D.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://i.imgur.com/FaOdU4D.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #DC2626;
      --primary-dark: #991B1B;
      --bg: #FFFFFF;
      --bg-light: #F9FAFB;
      --text-main: #0F172A;
      --text-secondary: #64748B;
      --border: #E2E8F0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--bg);
      color: var(--text-main);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NAV
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255,255,255,0.92);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .nav-container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-logo {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }

    .nav-logo img {
      width: 32px;
      height: 32px;
      object-fit: contain;
    }

    .nav-center {
      display: flex;
      gap: 40px;
      flex: 1;
      justify-content: center;
    }

    .nav-center a {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.2s;
    }

    .nav-center a:hover {
      color: var(--text-main);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .btn-nav {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
      text-decoration: none;
      display: inline-block;
    }

    .btn-nav:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(220, 38, 38, 0.3);
    }

    .btn-nav-outline {
      color: var(--text-main);
      border: 1.5px solid var(--border);
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-block;
      background: transparent;
    }

    .btn-nav-outline:hover {
      border-color: var(--text-main);
      transform: translateY(-2px);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HERO
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .hero {
      padding: 80px 24px 100px;
      background: linear-gradient(135deg, var(--bg) 0%, var(--bg-light) 100%);
      position: relative;
      overflow: hidden;
    }

    .hero-container {
      max-width: 1280px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 60px;
      align-items: center;
      position: relative;
      z-index: 2;
    }

    .hero-content {
      text-align: center;
    }

    .hero-content h1 {
      font-size: 56px;
      font-weight: 800;
      line-height: 1.15;
      color: var(--text-main);
      margin-bottom: 24px;
      letter-spacing: -1px;
      animation: slideInUp 0.6s ease-out 0.1s both;
    }

    .hero-content h1 .accent {
      color: var(--primary);
    }

    .hero-content p {
      font-size: 18px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 48px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      animation: slideInUp 0.6s ease-out 0.2s both;
    }

    .hero-buttons {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
      animation: slideInUp 0.6s ease-out 0.3s both;
      margin-bottom: 40px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(220, 38, 38, 0.25);
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(220, 38, 38, 0.35);
    }

    .btn-secondary {
      background: var(--bg);
      color: var(--text-main);
      border: 2px solid var(--border);
      padding: 12px 26px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      display: inline-block;
    }

    .btn-secondary:hover {
      border-color: var(--primary);
      color: var(--primary);
      transform: translateY(-4px);
    }

    .hero-meta {
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
      animation: slideInUp 0.6s ease-out 0.4s both;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTIONS BASE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .section {
      padding: 100px 24px;
    }

    .section-container {
      max-width: 1280px;
      margin: 0 auto;
    }

    .section-title {
      font-size: 48px;
      font-weight: 800;
      color: var(--text-main);
      margin-bottom: 16px;
      line-height: 1.2;
    }

    .section-subtitle {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 40px;
    }

    .section-description {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.7;
      max-width: 700px;
    }

    /* Scroll reveal */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PRODUCT SECTION
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .product-section {
      background: var(--bg);
      text-align: center;
    }

    .product-description {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-top: 20px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CLIENTS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .clients-section {
      background: var(--bg);
      padding: 80px 24px;
    }

    .clients-grid {
      display: flex;
      justify-content: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .client-card {
      display: flex;
      align-items: center;
      gap: 16px;
      background: var(--bg-light);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 20px 28px;
      text-decoration: none;
      color: var(--text-main);
      transition: all 0.3s ease;
      min-width: 320px;
    }

    .client-card:hover {
      border-color: var(--primary);
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(220, 38, 38, 0.1);
    }

    .client-logo {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .client-info {
      flex: 1;
    }

    .client-info h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 2px;
    }

    .client-info p {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .client-arrow {
      font-size: 20px;
      color: var(--primary);
      font-weight: 700;
      transition: transform 0.2s;
    }

    .client-card:hover .client-arrow {
      transform: translateX(4px);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TRANSFORM SECTION (was "problem")
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .transform-section {
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg) 100%);
    }

    .transform-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 50px;
    }

    .transform-card {
      background: white;
      padding: 28px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .transform-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .transform-card .before {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .transform-card .before::before {
      content: '';
      width: 8px; height: 2px;
      background: var(--border);
      flex-shrink: 0;
    }

    .transform-card .after {
      font-size: 16px;
      color: var(--text-main);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .transform-card .after::before {
      content: '';
      width: 8px; height: 2px;
      background: var(--primary);
      flex-shrink: 0;
    }

    .transform-closing {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-top: 50px;
      max-width: 700px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOW IT WORKS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .how-it-works {
      background: var(--bg);
    }

    .steps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 50px;
      margin-top: 60px;
    }

    .step {
      text-align: left;
    }

    .step-number {
      font-size: 56px;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 16px;
      line-height: 1;
    }

    .step-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 12px;
    }

    .step-description {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.7;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BENEFITS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .benefits-section {
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg) 100%);
    }

    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
      margin-top: 60px;
    }

    .benefit-card {
      background: white;
      padding: 24px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }
    .benefit-card:hover {
      transform: translateY(-3px);
    }
    .benefit-icon {
      font-size: 24px;
      margin-bottom: 12px;
    }
    .benefit-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 6px;
    }
    .benefit-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PRICING
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .pricing-section {
      background: var(--bg);
      text-align: center;
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: stretch;
      gap: 1.5rem;
      margin-top: 60px;
      max-width: 820px;
      margin-left: auto;
      margin-right: auto;
    }

    .pricing-card {
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 2.5rem;
      text-align: center;
      position: relative;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .pricing-card:hover {
      border-color: #D4D4D8;
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0,0,0,0.08);
    }

    .pricing-card.featured {
      border-color: #DC2626;
      background: linear-gradient(135deg, #FFF 0%, #FEF2F2 100%);
      box-shadow: 0 12px 32px rgba(220,38,38,0.12);
    }

    .pricing-card.featured:hover {
      transform: translateY(-4px);
    }

    .pricing-badge {
      display: inline-flex;
      padding: 4px 12px;
      background: rgba(220,38,38,0.08);
      color: #DC2626;
      font-size: 12px;
      font-weight: 700;
      border-radius: 100px;
      margin-bottom: 16px;
    }

    .pricing-name {
      font-size: 20px;
      font-weight: 800;
      color: #0F172A;
      margin-bottom: 8px;
    }

    .pricing-amount {
      font-size: 56px;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 16px;
      line-height: 1;
    }

    .pricing-period {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .pricing-description {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 40px;
    }

    .pricing-features {
      list-style: none;
      text-align: left;
      margin-bottom: 36px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      flex: 1;
    }
    .pricing-features li {
      font-size: 14px;
      color: var(--text-main);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .pricing-features li::before {
      content: 'âœ“';
      color: #16a34a;
      font-weight: 700;
      flex-shrink: 0;
    }
    .pricing-features.kit li::before {
      content: 'â†’';
      color: #ea580c;
    }

    .pricing-btn {
      width: 100%;
      background: var(--primary);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(220, 38, 38, 0.25);
      text-decoration: none;
      display: inline-block;
    }

    .pricing-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(220, 38, 38, 0.35);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CTA
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .cta-section {
      background: linear-gradient(135deg, var(--text-main) 0%, #1a1f3a 100%);
      color: white;
      text-align: center;
      padding: 120px 24px;
      position: relative;
      overflow: hidden;
    }

    .cta-character {
      position: absolute;
      right: 5%;
      bottom: -20px;
      width: 280px;
      opacity: 0.15;
      pointer-events: none;
    }
    .cta-character img {
      width: 100%;
      height: auto;
      object-fit: contain;
    }

    .cta-title {
      font-size: 48px;
      font-weight: 800;
      margin-bottom: 16px;
      line-height: 1.2;
      position: relative;
      z-index: 2;
    }

    .cta-subtitle {
      font-size: 20px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 50px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
      position: relative;
      z-index: 2;
    }

    .cta-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(220, 38, 38, 0.25);
      text-decoration: none;
      display: inline-block;
      position: relative;
      z-index: 2;
    }

    .cta-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(220, 38, 38, 0.35);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    footer {
      padding: 60px 24px 40px;
      background: var(--text-main);
      color: white;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-container {
      max-width: 1280px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 12px;
    }

    .footer-logo {
      font-size: 24px;
      font-weight: 800;
    }

    .footer-info p {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
    }

    .footer-links {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 16px;
    }
    .footer-links a {
      color: rgba(255, 255, 255, 0.6);
      text-decoration: none;
      font-size: 13px;
      transition: color 0.2s;
    }
    .footer-links a:hover { color: white; }
    .footer-contact {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.6);
      margin-top: 8px;
    }
    .footer-contact a { color: rgba(255,255,255,0.7); text-decoration: none; }
    .footer-contact a:hover { color: white; }
    .footer-badges {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    .footer-badges img { height: 40px; object-fit: contain; }
    .footer-copyright {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.4);
      margin-top: 24px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ANIMATIONS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes slideInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MOBILE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CHATBOT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .pincer-chat-fab {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 998;
      animation: fabSlideIn 0.8s ease-out 1.5s both;
    }

    @keyframes fabSlideIn {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .pincer-chat-fab button {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: white;
      border: none;
      padding: 0;
      cursor: pointer;
      box-shadow: 0 6px 24px rgba(0,0,0,0.2);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .pincer-chat-fab button img {
      width: 44px;
      height: 44px;
      object-fit: contain;
    }

    .pincer-chat-fab button:hover {
      transform: scale(1.1);
      box-shadow: 0 10px 32px rgba(220,38,38,0.45);
    }

    #pincerChatModal {
      display: none;
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 370px;
      max-width: 92vw;
      height: 520px;
      max-height: 75vh;
      background: white;
      border-radius: 16px;
      box-shadow: 0 12px 48px rgba(0,0,0,0.2);
      z-index: 999;
      flex-direction: column;
      overflow: hidden;
    }

    .pchat-header {
      background: var(--primary);
      color: white;
      padding: 16px 18px;
      font-weight: 700;
      font-size: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .pchat-header button {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      line-height: 1;
    }

    #pincerChatMessages {
      display: flex;
      flex-direction: column;
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      background: #f8f9fa;
    }

    .pchat-msg {
      margin-bottom: 10px;
      padding: 10px 14px;
      border-radius: 14px;
      max-width: 82%;
      font-size: 14px;
      line-height: 1.5;
      animation: pchatSlideIn 0.3s ease-out;
    }

    @keyframes pchatSlideIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .pchat-bot {
      background: white;
      color: var(--text-main);
      align-self: flex-start;
      border: 1px solid var(--border);
    }

    .pchat-user {
      background: var(--primary);
      color: white;
      align-self: flex-end;
      margin-left: auto;
    }

    .pchat-link {
      display: inline-block;
      background: var(--primary);
      color: white;
      text-decoration: none;
      padding: 8px 18px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      margin: 4px 4px 4px 0;
      transition: all 0.2s;
    }

    .pchat-link:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
    }

    #pincerChatReplies {
      padding: 10px 14px;
      background: white;
      border-top: 1px solid var(--border);
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pchat-reply-btn {
      background: white;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .pchat-reply-btn:hover {
      background: var(--primary);
      color: white;
    }

    .pchat-input-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      background: white;
      border-top: 1px solid var(--border);
    }

    .pchat-input-bar input {
      flex: 1;
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 10px 16px;
      font-size: 14px;
      outline: none;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .pchat-input-bar input:focus {
      border-color: var(--primary);
    }

    .pchat-send-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary);
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      flex-shrink: 0;
    }

    .pchat-send-btn:hover {
      background: var(--primary-dark);
    }

    .pchat-mic-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f1f5f9;
      border: none;
      color: #64748b;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, color 0.2s;
      flex-shrink: 0;
    }

    .pchat-mic-btn:hover {
      background: #e2e8f0;
    }

    .pchat-mic-btn.recording {
      background: #ef4444;
      color: white;
      animation: mic-pulse 1s ease-in-out infinite;
    }

    @keyframes mic-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .pchat-typing {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 10px 14px;
      background: white;
      border: 1px solid var(--border);
      border-radius: 14px;
      max-width: 60%;
      align-self: flex-start;
      margin-bottom: 10px;
      animation: pchatSlideIn 0.3s ease-out;
    }

    .pchat-typing span {
      width: 7px;
      height: 7px;
      background: var(--primary);
      border-radius: 50%;
      animation: pchatDot 1.4s infinite;
    }

    .pchat-typing span:nth-child(2) { animation-delay: 0.2s; }
    .pchat-typing span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes pchatDot {
      0%, 60%, 100% { opacity: 0.3; transform: scale(0.8); }
      30% { opacity: 1; transform: scale(1); }
    }

    @media (max-width: 768px) {
      .hero-container {
        grid-template-columns: 1fr;
        gap: 40px;
      }

      .hero-content h1 {
        font-size: 36px;
      }

      .nav-center {
        display: none;
      }

      .section-title {
        font-size: 32px;
      }

      .cta-title {
        font-size: 32px;
      }

      .cta-character {
        width: 180px;
        opacity: 0.1;
      }

      .steps-grid {
        gap: 30px;
      }

      .benefits-grid {
        grid-template-columns: 1fr;
      }

      .transform-grid {
        grid-template-columns: 1fr;
      }

      .pricing-grid {
        grid-template-columns: 1fr;
      }

      #pincerChatModal {
        width: 100%;
        max-width: 100vw;
        height: 100%;
        max-height: 100vh;
        bottom: 0;
        right: 0;
        border-radius: 0;
      }
    }
  </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAVIGATION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav>
  <div class="nav-container">
    <a class="nav-logo" href="#home">
      <img src="https://i.imgur.com/t72wYFc.png" alt="Pincer">
      <span>Pincer</span>
    </a>
    <div class="nav-center">
      <a href="#product">Producto</a>
      <a href="#how-it-works">CÃ³mo funciona</a>
      <a href="#benefits">Beneficios</a>
      <a href="#pricing">Precio</a>
    </div>
    <div class="nav-right">
      <a class="btn-nav-outline" href="/login">Sign In</a>
      <a class="btn-nav" href="/signup">Sign Up</a>
    </div>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HERO
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="hero" id="home">
  <div class="hero-container">
    <div class="hero-content">
      <img src="https://i.imgur.com/ZHGymz9.jpeg" alt="Pincer en acciÃ³n" style="width: 100%; max-width: 500px; border-radius: 16px; margin-bottom: 24px; box-shadow: 0 8px 24px rgba(0,0,0,0.1);">
      <h1>El servicio <span class="accent">premium</span> que tu negocio merece.</h1>
      <p>Tus clientes escanean, eligen y pagan desde su celular. Tu equipo trabaja con mÃ¡s claridad y menos interrupciones.</p>
      <div class="hero-buttons">
        <a class="btn-primary" href="https://wa.me/18295481236?text=Hola%2C%20quiero%20probar%20Pincer%20gratis" target="_blank" rel="noopener">Try out for free</a>
        <a class="btn-secondary" href="#how-it-works">Ver cÃ³mo funciona</a>
      </div>
      <div class="hero-meta">
        FOOD TRUCKS Â· FOOD COURTS Â· BARES Â· RESTAURANTES Â· CAFETERÃAS
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRODUCT
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section product-section" id="product">
  <div class="section-container reveal">
    <div style="text-align: center;">
      <h2 class="section-subtitle">Escanean, eligen y pagan.</h2>
      <h1 class="section-title">MenÃº digital + chatbot IA + dashboard + analÃ­ticas. Todo en uno.</h1>

    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NUESTROS CLIENTES
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section clients-section" id="clientes">
  <div class="section-container">
    <h1 class="section-title reveal" style="text-align: center; margin-bottom: 16px;">Negocios que ya confÃ­an en Pincer</h1>
    <p class="section-description reveal" style="text-align: center; margin: 0 auto 50px; max-width: 500px;">Restaurantes y food trucks que ya estÃ¡n elevando su servicio con pedidos por QR.</p>
    <div class="clients-grid reveal">
      <a href="/mrsandwich" class="client-card">
        <img src="https://i.imgur.com/mqzDXK4.jpeg" alt="Mr. Sandwich by Chef Elly" class="client-logo">
        <div class="client-info">
          <h3>Mr. Sandwich</h3>
          <p>by Chef Elly Â· Santiago, RD</p>
        </div>
        <div class="client-arrow">â†’</div>
      </a>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TRANSFORM (antes: problema)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section transform-section" id="transform">
  <div class="section-container">
    <h1 class="section-title reveal">Tu operaciÃ³n, transformada.</h1>
    <div class="transform-grid">
      <div class="transform-card reveal">
        <div class="before">Pedidos anotados a mano</div>
        <div class="after">Pedidos digitales en tiempo real</div>
      </div>
      <div class="transform-card reveal">
        <div class="before">Repetir Ã³rdenes varias veces</div>
        <div class="after">Orden clara y confirmada al instante</div>
      </div>
      <div class="transform-card reveal">
        <div class="before">Clientes preguntando si ya estÃ¡ listo</div>
        <div class="after">NotificaciÃ³n automÃ¡tica cuando estÃ¡ listo</div>
      </div>
      <div class="transform-card reveal">
        <div class="before">Filas que interrumpen el ritmo</div>
        <div class="after">Cada cliente ordena desde su celular</div>
      </div>
    </div>
    <p class="transform-closing reveal">Pincer no reemplaza a tu equipo â€” le da mejores herramientas para trabajar.</p>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOW IT WORKS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section how-it-works" id="how-it-works">
  <div class="section-container">
    <h1 class="section-title reveal" style="text-align: center; margin-bottom: 60px;">AsÃ­ funciona</h1>
    <div class="steps-grid">
      <div class="step reveal">
        <div class="step-number">01</div>
        <h3 class="step-title">Registra tu negocio</h3>
        <p class="step-description">Nos envÃ­as tu menÃº, logo y precios. Creamos tu pÃ¡gina personalizada con QR code listo para imprimir.</p>
      </div>
      <div class="step reveal">
        <div class="step-number">02</div>
        <h3 class="step-title">Tus clientes escanean, eligen y pagan</h3>
        <p class="step-description">Acceden al menÃº digital desde el navegador. Eligen lo que quieren y pagan con tarjeta, Apple Pay o Google Pay.</p>
      </div>
      <div class="step reveal">
        <div class="step-number">03</div>
        <h3 class="step-title">Tu equipo recibe, prepara y analiza</h3>
        <p class="step-description">La orden llega al dashboard en tiempo real. Tu equipo prepara, notifica al cliente por WhatsApp y tÃº ves las analÃ­ticas de ventas del dÃ­a.</p>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BENEFITS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section benefits-section" id="benefits">
  <div class="section-container">
    <h1 class="section-title reveal">Todo lo que necesitas. Desde el pedido hasta la analÃ­tica.</h1>
    <div class="benefits-grid">
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ¤–</div>
        <div class="benefit-title">Mesero virtual con IA</div>
        <div class="benefit-desc">Un chatbot personalizado con la voz de tu marca que saluda y guÃ­a a tus clientes por el menÃº.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ“Š</div>
        <div class="benefit-title">AnalÃ­ticas en tiempo real</div>
        <div class="benefit-desc">Ventas del dÃ­a, ticket promedio, producto mÃ¡s vendido y mÃ¡s. Todo en tu dashboard.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ§ </div>
        <div class="benefit-title">Asistente de ventas IA</div>
        <div class="benefit-desc">PregÃºntale a tu gerente virtual: "Â¿CuÃ¡nto vendÃ­ hoy?" o "Â¿QuÃ© producto se vende mÃ¡s?" y responde al instante.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ’³</div>
        <div class="benefit-title">Pagos integrados</div>
        <div class="benefit-desc">Tus clientes pagan con tarjeta, Apple Pay o Google Pay a travÃ©s de Azul.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">âš¡</div>
        <div class="benefit-title">Ã“rdenes en tiempo real</div>
        <div class="benefit-desc">Cada pedido llega al instante con estado, detalle y notas del cliente. Sin confusiones.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ¨</div>
        <div class="benefit-title">Tu marca, tu identidad</div>
        <div class="benefit-desc">MenÃº digital personalizado con tu logo, colores, fotos de productos y la voz de tu negocio.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ’¬</div>
        <div class="benefit-title">Notificaciones WhatsApp</div>
        <div class="benefit-desc">Tu equipo recibe cada nueva orden por WhatsApp. Tu cliente sabe cuando su pedido estÃ¡ listo.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸ“±</div>
        <div class="benefit-title">Sin app, sin descargas</div>
        <div class="benefit-desc">Tu cliente escanea el QR y ordena directo desde el navegador. Funciona en cualquier celular.</div>
      </div>
      <div class="benefit-card reveal">
        <div class="benefit-icon">ğŸš€</div>
        <div class="benefit-title">Listo en 24 horas</div>
        <div class="benefit-desc">Te configuramos todo â€” menÃº, chatbot, dashboard, QR â€” y quedas operativo en un dÃ­a.</div>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRICING
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section pricing-section" id="pricing">
  <div class="section-container">
    <h1 class="section-title reveal" style="text-align: center;">Transparente y simple.</h1>
    <p style="text-align: center; color: #64748B; font-size: 16px; margin-bottom: 0;">El software es gratis. Solo inviertes una vez en el equipo.</p>
    <div class="pricing-grid">

      <!-- SOFTWARE PINCER -->
      <div class="pricing-card featured reveal">
        <div class="pricing-badge">âœ¦ Gratis</div>
        <div class="pricing-name">Software Pincer</div>
        <div class="pricing-amount" style="font-size: 42px;">$0</div>
        <div class="pricing-period">/ mes</div>
        <p class="pricing-description">Sin lÃ­mite de Ã³rdenes</p>
        <ul class="pricing-features" style="grid-template-columns: 1fr;">
          <li>MenÃº digital con QR (items ilimitados)</li>
          <li>Pagos con tarjeta (Azul)</li>
          <li>Dashboard de Ã³rdenes en tiempo real</li>
          <li>Notificaciones push</li>
          <li>Notificaciones WhatsApp</li>
          <li>Mesero virtual con IA</li>
          <li>PersonalizaciÃ³n de marca</li>
          <li>Soporte incluido</li>
        </ul>
        <a class="pricing-btn" href="https://wa.me/18295481236?text=Hola%2C%20quiero%20activar%20Pincer%20gratis" target="_blank" rel="noopener">Activar</a>
      </div>

      <!-- KIT DE INICIO -->
      <div class="pricing-card reveal">
        <div class="pricing-name">Kit de Inicio</div>
        <div class="pricing-amount" style="font-size: 42px;">~RD$9,000</div>
        <div class="pricing-period">InversiÃ³n Ãºnica</div>
        <p class="pricing-description">Todo lo que necesitas para arrancar.</p>
        <ul class="pricing-features kit" style="grid-template-columns: 1fr;">
          <li>Tablet 8" para recibir Ã³rdenes</li>
          <li>Impresora tÃ©rmica de tickets</li>
          <li>ConfiguraciÃ³n e instalaciÃ³n</li>
          <li>CapacitaciÃ³n para tu equipo</li>
        </ul>
        <a class="pricing-btn" style="background: #0F172A;" href="https://wa.me/18295481236?text=Hola%2C%20me%20interesa%20el%20Kit%20de%20Inicio%20de%20Pincer" target="_blank" rel="noopener">Contactar ventas</a>
        <p style="font-size: 12px; color: #64748B; margin-top: 14px; line-height: 1.4;">Se recupera en la primera semana. Sin mensualidades.</p>
      </div>

    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CTA
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="cta-section" id="cta">
  <div class="cta-character">
    <img src="https://i.imgur.com/N8hTYN5.png" alt="Pincer robot" loading="lazy">
  </div>
  <div class="section-container">
    <h1 class="cta-title">DedÃ­cate a tu cocina.<br>Pincer se encarga de los pedidos.</h1>
    <p class="cta-subtitle">La herramienta que tu equipo necesita para dar un servicio mÃ¡s rÃ¡pido y organizado.</p>
    <a class="cta-btn" href="https://wa.me/18295481236?text=Hola%2C%20me%20interesa%20Pincer" target="_blank" rel="noopener">Agendar reuniÃ³n por WhatsApp</a>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FOOTER
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer>
  <div class="footer-container">
    <div class="footer-logo">Pincer</div>
    <div class="footer-info">
      <p>Pedidos por QR que elevan la experiencia de tu restaurante, food truck o food park.</p>
    </div>
    <div class="footer-links">
      <a href="/politicas/privacidad">Privacidad</a>
      <a href="/politicas/devoluciones">Devoluciones</a>
      <a href="/politicas/seguridad">Seguridad</a>
      <a href="/politicas/entrega">Entrega</a>
    </div>
    <div class="footer-contact">
      <a href="mailto:info@pincerweb.com">info@pincerweb.com</a> Â· <a href="tel:+18295481236">+1 (829) 548-1236</a><br>
      Santiago, RepÃºblica Dominicana
    </div>
    <div class="footer-badges">
      <img src="https://i.imgur.com/gMRFXRj.png" alt="Visa">
      <img src="https://i.imgur.com/qgq4m7h.png" alt="Mastercard">
      <img src="https://i.imgur.com/fgA6bpW.png" alt="Visa Secure">
      <img src="https://i.imgur.com/KLv1a0r.png" alt="Mastercard ID Check">
    </div>
    <div class="footer-copyright">Â© 2026 Pincer. Hecho en RepÃºblica Dominicana.</div>
  </div>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CHATBOT
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="pincer-chat-fab" id="pincerChatFab">
  <button onclick="openPincerChat()" aria-label="Abrir asistente"><img src="https://i.imgur.com/Dep2ZsJ.png" alt="Pincer"></button>
</div>

<div id="pincerChatModal">
  <div class="pchat-header">
    <span>Asistente Pincer ğŸ¤µ</span>
    <button onclick="closePincerChat()">Ã—</button>
  </div>
  <div id="pincerChatMessages"></div>
  <div id="pincerChatReplies"></div>
  <div class="pchat-input-bar">
    <input type="text" id="pincerChatInput" placeholder="Escribe tu mensaje..." onkeydown="if(event.key==='Enter')sendPincerChat()">
    <button class="pchat-mic-btn" id="pincerChatMicBtn" onclick="togglePincerVoice()" style="display:none" aria-label="Grabar voz">ğŸ¤</button>
    <button class="pchat-send-btn" onclick="sendPincerChat()">â¤</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
  // Scroll reveal
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });

  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>

<script>
(function() {
  let chatHistory = [];
  let chatOpen = false;
  var chatSessionId = sessionStorage.getItem('pincer_chat_session_landing') || crypto.randomUUID();
  sessionStorage.setItem('pincer_chat_session_landing', chatSessionId);

  window.openPincerChat = function() {
    const modal = document.getElementById('pincerChatModal');
    const fab = document.getElementById('pincerChatFab');
    modal.style.display = 'flex';
    fab.style.display = 'none';
    chatOpen = true;

    if (chatHistory.length === 0) {
      showBotMessage('Â¡Hola! Soy el asistente de Pincer ğŸ‘‹ Â¿En quÃ© te puedo ayudar?');
      showReplies(['Soy restaurante', 'Quiero comer']);
    }
  };

  window.closePincerChat = function() {
    document.getElementById('pincerChatModal').style.display = 'none';
    document.getElementById('pincerChatFab').style.display = 'block';
    chatOpen = false;
  };

  window.sendPincerChat = function() {
    const input = document.getElementById('pincerChatInput');
    const text = input.value.trim();
    if (!text) return;
    input.value = '';
    clearReplies();
    showUserMessage(text);
    callAPI(text);
  };

  // Voice input via Web Speech API
  (function() {
    var SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SR) return;

    var micBtn = document.getElementById('pincerChatMicBtn');
    if (micBtn) micBtn.style.display = 'flex';

    var recognition = new SR();
    recognition.continuous = false;
    recognition.interimResults = false;
    recognition.lang = (navigator.language || 'es');

    var isRecording = false;
    var autoSendTimer = null;
    var timeoutTimer = null;
    var originalPlaceholder = '';

    function stopRecording() {
      console.log('[voice] stopRecording called');
      clearTimeout(timeoutTimer);
      try { recognition.stop(); } catch(e) {}
      micBtn.classList.remove('recording');
      isRecording = false;
      var input = document.getElementById('pincerChatInput');
      input.placeholder = originalPlaceholder || 'Escribe tu mensaje...';
    }

    function startRecognition() {
      console.log('[voice] startRecognition called');
      recognition.lang = (navigator.language || 'es');
      try {
        recognition.start();
        console.log('[voice] recognition.start() succeeded');
        timeoutTimer = setTimeout(function() {
          console.log('[voice] 10s timeout â€” no speech detected');
          if (isRecording) stopRecording();
        }, 10000);
      } catch(e) {
        console.error('[voice] recognition.start() threw:', e);
        micBtn.classList.remove('recording');
        isRecording = false;
        var input = document.getElementById('pincerChatInput');
        input.placeholder = 'Toca el micrÃ³fono para hablar';
      }
    }

    window.togglePincerVoice = function() {
      console.log('[voice] togglePincerVoice, isRecording:', isRecording);
      if (isRecording) {
        stopRecording();
        return;
      }
      var input = document.getElementById('pincerChatInput');
      originalPlaceholder = input.placeholder;
      input.placeholder = 'Escuchando...';
      input.value = '';
      micBtn.classList.add('recording');
      isRecording = true;

      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        console.log('[voice] requesting mic permission via getUserMedia');
        navigator.mediaDevices.getUserMedia({ audio: true }).then(function(stream) {
          console.log('[voice] mic permission granted');
          stream.getTracks().forEach(function(t) { t.stop(); });
          startRecognition();
        }).catch(function(err) {
          console.error('[voice] mic permission denied:', err);
          micBtn.classList.remove('recording');
          isRecording = false;
          input.placeholder = 'Permite el acceso al micrÃ³fono en tu navegador';
        });
      } else {
        startRecognition();
      }
    };

    recognition.onstart = function() {
      console.log('[voice] recognition.onstart fired');
    };

    recognition.onresult = function(event) {
      console.log('[voice] recognition.onresult fired, results:', event.results.length);
      clearTimeout(timeoutTimer);
      var transcript = '';
      for (var i = event.resultIndex; i < event.results.length; i++) {
        transcript += event.results[i][0].transcript;
      }
      var input = document.getElementById('pincerChatInput');
      input.value = transcript;
      if (event.results[event.results.length - 1].isFinal) {
        console.log('[voice] final transcript:', transcript);
        clearTimeout(autoSendTimer);
        autoSendTimer = setTimeout(function() {
          if (input.value.trim()) window.sendPincerChat();
        }, 1500);
      }
    };

    recognition.onend = function() {
      console.log('[voice] recognition.onend fired');
      clearTimeout(timeoutTimer);
      micBtn.classList.remove('recording');
      isRecording = false;
      var input = document.getElementById('pincerChatInput');
      input.placeholder = originalPlaceholder || 'Escribe tu mensaje...';
    };

    recognition.onerror = function(event) {
      console.error('[voice] recognition.onerror:', event.error);
      clearTimeout(timeoutTimer);
      stopRecording();
    };
  })();

  function showBotMessage(text) {
    const container = document.getElementById('pincerChatMessages');
    const div = document.createElement('div');
    div.className = 'pchat-msg pchat-bot';
    div.textContent = text;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function showBotHTML(html) {
    const container = document.getElementById('pincerChatMessages');
    const div = document.createElement('div');
    div.className = 'pchat-msg pchat-bot';
    div.innerHTML = html;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function showUserMessage(text) {
    const container = document.getElementById('pincerChatMessages');
    const div = document.createElement('div');
    div.className = 'pchat-msg pchat-user';
    div.textContent = text;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function showReplies(labels) {
    const container = document.getElementById('pincerChatReplies');
    container.innerHTML = '';
    labels.forEach(function(label) {
      const btn = document.createElement('button');
      btn.className = 'pchat-reply-btn';
      btn.textContent = label;
      btn.onclick = function() {
        clearReplies();
        showUserMessage(label);
        callAPI(label);
      };
      container.appendChild(btn);
    });
    var msgs = document.getElementById('pincerChatMessages');
    msgs.scrollTop = msgs.scrollHeight;
  }

  function clearReplies() {
    document.getElementById('pincerChatReplies').innerHTML = '';
  }

  function showTyping() {
    const container = document.getElementById('pincerChatMessages');
    const div = document.createElement('div');
    div.className = 'pchat-typing';
    div.id = 'pincerChatTyping';
    div.innerHTML = '<span></span><span></span><span></span>';
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function hideTyping() {
    const el = document.getElementById('pincerChatTyping');
    if (el) el.remove();
  }

  function parseBotResponse(text) {
    let cleanText = text;
    let buttons = [];
    let links = [];

    // Extract [LINK: visible text | /path]
    const linkRegex = /\[LINK:\s*([^|]+)\|\s*([^\]]+)\]/g;
    let linkMatch;
    while ((linkMatch = linkRegex.exec(cleanText)) !== null) {
      links.push({ label: linkMatch[1].trim(), path: linkMatch[2].trim() });
    }
    cleanText = cleanText.replace(/\[LINK:\s*[^\]]+\]/g, '').trim();

    // Extract [BUTTONS: opt1 | opt2 | opt3]
    const btnRegex = /\[BUTTONS:\s*([^\]]+)\]/g;
    let btnMatch;
    while ((btnMatch = btnRegex.exec(cleanText)) !== null) {
      const parsed = btnMatch[1].split('|').map(function(b) { return b.trim(); }).filter(Boolean);
      buttons.push.apply(buttons, parsed);
    }
    cleanText = cleanText.replace(/\[BUTTONS:\s*[^\]]+\]/g, '').trim();

    return { cleanText: cleanText, buttons: buttons, links: links };
  }

  async function callAPI(userMessage) {
    chatHistory.push({ role: 'user', content: userMessage });
    showTyping();

    var payload = {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ messages: chatHistory, browserLanguage: navigator.language || 'es', sessionId: chatSessionId })
    };

    var res;
    try {
      res = await fetch('/api/pincer-chat', Object.assign({}, payload, { signal: AbortSignal.timeout(28000) }));
    } catch (e1) {
      try {
        res = await fetch('/api/pincer-chat', Object.assign({}, payload, { signal: AbortSignal.timeout(28000) }));
      } catch (e2) {
        hideTyping();
        showBotMessage('Ups, algo salio mal. Intenta de nuevo ğŸ˜…');
        return;
      }
    }

    hideTyping();

    try {
      if (res.ok) {
        var data = await res.json();
        var rawAnswer = data.answer || 'Ups, algo salio mal ğŸ˜…';
        chatHistory.push({ role: 'assistant', content: rawAnswer });

        var parsed = parseBotResponse(rawAnswer);

        if (parsed.cleanText) {
          showBotMessage(parsed.cleanText);
        }

        // Show links as clickable buttons
        if (parsed.links.length > 0) {
          var linksHTML = parsed.links.map(function(l) {
            return '<a class="pchat-link" href="' + l.path + '" target="_blank">' + l.label + ' â†’</a>';
          }).join(' ');
          showBotHTML(linksHTML);
        }

        // Show quick reply buttons
        if (parsed.buttons.length > 0) {
          showReplies(parsed.buttons);
        }

        var msgs = document.getElementById('pincerChatMessages');
        msgs.scrollTop = msgs.scrollHeight;
      } else {
        showBotMessage('Ups, algo salio mal. Intenta de nuevo ğŸ˜…');
      }
    } catch (e) {
      showBotMessage('Ups, algo salio mal. Intenta de nuevo ğŸ˜…');
    }
  }
})();
</script>

</body>
</html>